pico-8 cartridge // http://www.pico-8.com
version 15
__lua__
function _init()
		t=0
  state = {}
  state[1] = {}
  for i=-128,128 do
    state[1][i]=false
  end
  state[1][128/2]=true

  rnd_init()  
end

function rnd_init()
		t=0
  state = {}
  state[1] = {}
  for i=-128,128 do
    state[1][i]=flr(rnd(2))>0
  end
  --state[1][128/2]=true
  
end

function _update60()
  t+=1
  --add(state,iterate_rule(state[#state],rule30))
  --add(state,iterate_rule(state[#state],rule90))
  --add(state,iterate_rule(state[#state],rule184))
  --add(state,iterate_rule(state[#state],rule106))
  --add(state,iterate_rule(state[#state],rule45))
  --add(state,iterate_rule(state[#state],rule26))
  add(state,iterate_rule(state[#state],rule41))
  if #state>=128 then
    camera(0,#state-128)
    del(state,state[1])
  end
end

function _draw()
  cls()
  for i=1,#state do
    for j=1,128 do
      if state[i][j]==true then
        pset(j,i,7)
      else
        pset(j,i,3)
      end
    end
  end
end

function rule26(l,m,r)
  return (
    (l and not m and not r) or
    (not l and m and r) or
    (not l and not m and r)
  ) or false
end

function rule30(l,m,r)
  return (
    (l and not m and not r) or
    (not l and m and r) or
    (not l and m and not r) or
    (not l and not m and r)
  ) or false
end

function rule41(l,m,r)
  return (
    (l and not m and r) or
    (not l and m and r) or
    (not l and not m and not r)
  ) or false
end

function rule45(l,m,r)
  return (
    (l and not m and r) or
    (not l and m and r) or
    (not l and m and not r) or
    (not l and not m and not r)
  ) or false
end

function rule90(in_array)
  return (
    (l and m and not r) or
    (l and not m and not r) or
    (not l and m and r) or
    (not l and not m and r)
  ) or false 
end

function rule106(l,m,r)
  return (
    (l and m and not r) or
    (l and not m and r) or
    (not l and m and r) or
    (not l and not m and r)
  ) or false
end

function rule184(l,m,r)
  return (
    (l and m and r) or
    (l and not m and r) or
    (l and not m and not r) or
    (not l and m and r)
  ) or false
end

function iterate_rule(in_state,fn)
  local out_state = {}
  for i=-128,128 do
    l=in_state[i]
    m=in_state[i+1]
    r=in_state[i+2]
    out_state[i+1] = fn(l,m,r)
  end
  return out_state
end
__label__
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888817188888888888888888888888888888
88888eeeeee888888888888888888888888888888888888888888888888888888888888888888888888ff8ff8888228817118122822888888822888888228888
8888ee888ee88888888888888888888888888888888888888888888888888888888888888888888888ff888ff888222217171712822888882282888888222888
888eee8e8ee88888e88888888888888888888888888888888888888888888888888888888888888888ff888ff888282117777712888888228882888888288888
888eee8e8ee8888eee8888888888888888888888888888888888888888888888888888888888888888ff888ff888221717777718222888228882888822288888
888eee8e8ee88888e88888888888888888888888888888888888888888888888888888888888888888ff888ff888822177777718222888882282888222288888
888eee888ee888888888888888888888888888888888888888888888888888888888888888888888888ff8ff8888828811777128222888888822888222888888
888eeeeeeee888888888888888888888888888888888888888888888888888888888888888888888888888888888888881777188888888888888888888888888
555555555555555555555555555555555b5b5b555b5555b55755556555555565555555c55c5c5557555555555555555555111555555555555555555555555555
555555555555555555555555555555555bbb5bbb5bb555b55755556555555565555555c55ccc5557555555555555555555555555555555555555555555555555
555555555555555555555555555555555b55555b5b5555b55755556555755565557555c5555c5557555555555555555555555555555555555555555555555555
555555555555555555555555555555555b555bb55bbb55b5557556655755566657555ccc555c5575555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
5555555555555555555555555eee5e5555ee5eee5555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
5555555555555555555555555e555e555e555e555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
5555555555555555555555555ee55e555eee5ee55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
5555555555555555555555555e555e55555e5e555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
5555555555555555555555555eee5eee5ee55eee5555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
555555555555555555555555555555555bbb55bb5bbb5bbb557556665555566655555cc55ccc5575555555555555555555555555555555555555555555555555
555555555555555555555555555555555b5b5b555b5555b55755556555555565555555c5555c5557555555555555555555555555555555555555555555555555
555555555555555555555555555555555bbb5bbb5bb555b55755556555555565555555c555cc5557555555555555555555555555555555555555555555555555
555555555555555555555555555555555b55555b5b5555b55755556555755565557555c5555c5557555555555555555555555555555555555555555555555555
555555555555555555555555555555555b555bb55bbb55b5557556655755566657555ccc5ccc5575555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
5555555555555555555555555eee5ee55ee555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
5555555555555555555555555e555e5e5e5e55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
5555555555555555555555555ee55e5e5e5e55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
5555555555555555555555555e555e5e5e5e55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
5555555555555555555555555eee5e5e5eee55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555eee5ee55ee55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555e555e5e5e5e5555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555ee55e5e5e5e5555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555e555e5e5e5e5555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555eee5e5e5eee5555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
555555555eee5ee55ee5555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
555555555e555e5e5e5e555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
555555555ee55e5e5e5e555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
555555555e555e5e5e5e555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
555555555eee5e5e5eee555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
5eee5ee55ee555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
5e555e5e5e5e55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
5ee55e5e5e5e55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
5e555e5e5e5e55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
5eee5e5e5eee55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
5eee5e5e5ee555ee5eee5eee55ee5ee5555556665656565556665666566655755666566555555666566656665666565655755555555555555555555555555555
5e555e5e5e5e5e5555e555e55e5e5e5e555556565656565556555556565657555565565655555656565656565656565655575555555555555555555555555555
5ee55e5e5e5e5e5555e555e55e5e5e5e555556655656565556655566565657555565565655555666566556655666566655575555555555555555555555555555
5e555e5e5e5e5e5555e555e55e5e5e5e555556565656565556555556565657555565565655555656565656565656555655575555555555555555555555555555
5e5555ee5e5e55ee55e55eee5ee55e5e555556565566566656665666566655755666565656665656565656565656566655755555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555556656565666555556665666566656665656555555555555557757755555555555555555555555555555555555555555555555555555555555555555
55555555565656565565555556565656565656565656555557775555557555755555555555555555555555555555555555555555555555555555555555555555
55555555565656565565555556665665566556665666555555555555577555775555555555555555555555555555555555555555555555555555555555555555
55555555565656565565555556565656565656565556555557775555557555755555555555555555555555555555555555555555555555555555555555555555
55555555566555665565566656565656565656565666555555555555557757755555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
555555555eee55ee5eee5555566655555cc555555cc55ccc5ccc55555ee555ee5555555555555555555555555555555555555555555555555555555555555555
555555555e555e5e5e5e55555565577755c5555555c5555c5c5c55555e5e5e5e5555555555555555555555555555555555555555555555555555555555555555
555555555ee55e5e5ee555555565555555c5555555c55ccc5ccc55555e5e5e5e5555555555555555555555555555555555555555555555555555555555555555
555555555e555e5e5e5e55555565577755c5557555c55c555c5c55555e5e5e5e5555555555555555555555555555555555555555555555555555555555555555
555555555e555ee55e5e5555566655555ccc57555ccc5ccc5ccc55555eee5ee55555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555566566656555555555555555ccc5ccc5c5555cc5ccc55555555555555555555555555555555555555555555555555555555555555555555
55555555555555555655565556555555577755555c555c5c5c555c555c5555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555655566556555555555555555cc55ccc5c555ccc5cc555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555655565556555555577755555c555c5c5c55555c5c5555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555566566656665555555555555c555c5c5ccc5cc55ccc55555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555655555556665665555556665666566656665656577556665577555555555555555555555555555555555555555555555555555555555555
55555555555555555655577755655656555556565656565656565656575555655557555555555555555555555555555555555555555555555555555555555555
55555555555555555655555555655656555556665665566556665666575555655557555555555555555555555555555555555555555555555555555555555555
55555555555555555655577755655656555556565656565656565556575555655557555555555555555555555555555555555555555555555555555555555555
55555555555555555666555556665656566656565656565656565666577556665577555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
555555555555555556665555566656655555566656665666566656565775566655555cc555775555555555555555555555555555555555555555555555555555
5555555555555555566657775565565655555656565656565656565657555565557555c555575555555555555555555555555555555555555555555555555555
5555555555555555565655555565565655555666566556655666566657555565577755c555575555555555555555555555555555555555555555555555555555
5555555555555555565657775565565655555656565656565656555657555565557555c555575555555555555555555555555555555555555555555555555555
555555555555555556565555566656565666565656565656565656665775566655555ccc55775555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
555555555555555556665555566656655555566656665666566656565775566655555ccc55775555555555555555555555555555555555555555555555555555
55555555555555555656577755655656555556565656565656565656575555655575555c55575555555555555555555555555555555555555555555555555555
555555555555555556655555556556565555566656655665566656665755556557775ccc55575555555555555555555555555555555555555555555555555555
555555555555555556565777556556565555565656565656565655565755556555755c5555575555555555555555555555555555555555555555555555555555
555555555555555556565555566656565666565656565656565656665775566655555ccc55775555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555bbb5bbb5bbb5bb55bbb5b5b55755c5c5ccc55555c5c555555555666555555555c5c55555c5555555c5c555555555575565555555eee5ee5
55555555555555555b5b5b5b55b55b5b55b55b5b57555c5c55c555c55c5c555555555565555555555c5c55555c5555c55c5c555555555755565555555e5e5e5e
55555555555555555bbb5bb555b55b5b55b55bbb5755555555c55555555555555555556555555555555555555c5555555555555555555755565555555eee5e5e
55555555555555555b555b5b55b55b5b55b55b5b5755555555c555c5555555555555556555555555555555555c5555c55555555555555755565555555e5e5e5e
55555555555555555b555b5b5bbb5b5b55b55b5b557555555ccc5555555555755575566655755575555555555ccc55555555557555755575566655555e5e5e5e
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555eee5eee55555575565555555eee5ee55ee555555ee555ee5eee5555566655555eee5ee55ee555555ee555ee5eee55555666557555555555
555555555555555555e55e5555555755565555555e5e5e5e5e5e55555e5e5e5e55e55555566655555e5e5e5e5e5e55555e5e5e5e55e555555656555755555555
555555555555555555e55ee555555755565555555eee5e5e5e5e55555e5e5e5e55e55555565655555eee5e5e5e5e55555e5e5e5e55e555555665555755555555
555555555555555555e55e5555555755565555555e5e5e5e5e5e55555e5e5e5e55e55555565655555e5e5e5e5e5e55555e5e5e5e55e555555656555755555555
55555555555555555eee5e5555555575566655555e5e5e5e5eee55555e5e5ee555e55555565655555e5e5e5e5eee55555e5e5ee555e555555656557555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
555555555555555555ee5eee555555755ee555ee5eee5555565555555eee5ee55ee55555566655555eee5ee55ee5555556665575555555555555555555555555
55555555555555555e5e5e5e555557555e5e5e5e55e55555565555555e5e5e5e5e5e5555566655555e5e5e5e5e5e555556565557555555555555555555555555
55555555555555555e5e5ee5555557555e5e5e5e55e55555565555555eee5e5e5e5e5555565655555eee5e5e5e5e555556655557555555555555555555555555
55555555555555555e5e5e5e555557555e5e5e5e55e55555565555555e5e5e5e5e5e5555565655555e5e5e5e5e5e555556565557555555555555555555555555
55555555555555555ee55e5e555555755e5e5ee555e55555566655555e5e5e5e5eee5555565655555e5e5e5e5eee555556565575555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
555555555555555555ee5eee555555755ee555ee5eee5555565555555eee5ee55ee55555566655555eee5ee55ee555555ee555ee5eee55555666557555555555
55555555555555555e5e5e5e555557555e5e5e5e55e55555565555555e5e5e5e5e5e5555566655555e5e5e5e5e5e55555e5e5e5e55e555555656555755555555
55555555555555555e5e5ee5555557555e5e5e5e55e55555565555555eee5e5e5e5e5555565655555eee5e5e5e5e55555e5e5e5e55e555555665555755555555
55555555555555555e5e5e5e555557555e5e5e5e55e55555565555555e5e5e5e5e5e5555565655555e5e5e5e5e5e55555e5e5e5e55e555555656555755555555
55555555555555555ee55e5e555555755e5e5ee555e55555566655555e5e5e5e5eee5555565655555e5e5e5e5eee55555e5e5ee555e555555656557555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
82888222822882228888828282228882822282228888888888888888888888888888888888888888888888888222822282888882822282288222822288866688
82888828828282888888828282828828828888828888888888888888888888888888888888888888888888888882888282888828828288288282888288888888
82888828828282288888822282228828822288228888888888888888888888888888888888888888888888888222822282228828822288288222822288822288
82888828828282888888888282828828888288828888888888888888888888888888888888888888888888888288828882828828828288288882828888888888
82228222828282228888888282228288822282228888888888888888888888888888888888888888888888888222822282228288822282228882822288822288
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888

__map__
0000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
